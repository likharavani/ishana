<style>
  .grid-item {
    background-color: #f5e8ff;
    padding-block-end: 2.5rem;
    text-align: center;
    display: grid;
    justify-content: center;
    padding-top: 2rem;
    position: relative;
  }

  /* Estilo del contenedor del carrusel */
  .carousel-container {
    width: 100%;
    padding: 3rem;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Contenido del carrusel */
  .carousel-content {
    display: flex;
    animation: scroll 50s linear infinite;
  }

  /* Cada elemento del carrusel */
  .carousel-item {
    min-width: 200px;
    height: 150px;
    margin-right: 10px;
    display: flex !important;
    justify-content: center;
    align-items: center;
  }

  .carousel-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
  }

  /* Animación para el scroll automático */
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  section {
    display: flex;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    place-items: center;
    margin: 0px;
    padding: 0px;
    list-style-type: none;
    opacity: 1;
    mask-image: linear-gradient(
      to right,
      rgba(0, 0, 0, 0) 0%,
      rgb(0, 0, 0) 12.5%,
      rgb(0, 0, 0) 87.5%,
      rgba(0, 0, 0, 0) 100%
    );
    overflow: hidden;
  }

</style>
<div class="main-page text-white " style="padding-top: 7rem; ">
  <div class="row container mx-auto p-4 justify-content-between">
    <div class="col-12 col-md-6 col-lg-7">
      <h2 class="fw-bold">Bring home beautiful interiors that fit your budget</h2>
      <p>
        Experience unmatched quality & timely delivery with Livspace
      </p>
    </div>
    <div class="col-12 col-md-6 col-lg-4">
      <div class="p-4 rounded bg-white text-dark shadow" id="contact_form">
        <h3>Let's Connect</h3>
        <p>Tell us some basic information, and our executive will get back to you.</p>
      
        <!-- email Field 
        <div class="mb-1">
                <label for="contact_email" class="form-label">Email</label>
                <input type="email" name="email" id="contact_email" class="form-control form-control-sm" required
                      placeholder="Enter your email" pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                      title="Please enter a valid email address (e.g., example@example.com)">
        </div>
      -->
      
        <!-- Name Field -->
        <div class="mb-2">
          <label for="contact_name" class="form-label">Name</label>
          <input type="text" name="name" id="contact_name" class="form-control form-control-sm" placeholder="Enter your name">
        </div>
    
        <!-- Contact Number Field -->
        <div class="my-2 input-group">
          <span class="input-group-text" id="basic-addon1">+91</span>
          <input type="number" name="contact" id="contact_contact" class="form-control form-control-sm" required 
          placeholder="Enter your 10-digit contact number" 
          pattern="^\d{10}$" 
          title="Please enter a valid 10-digit contact number">
        </div>
      
        <!-- State Selection -->
        <div class="input-group mb-2">
          <label for="contact_state" class="input-group-text" style="line-height: 0.5rem;">State</label>
          <select name="state" id="contact_state" class="form-select form-select-sm">
            <option value="Choose...">Choose...</option>
            <% @states.each do |state| %>
              <option value="<%= state %>"><%= state %></option>
            <% end %>
          </select>
        </div>
        
        <!-- City Selection -->
        <div class="input-group mb-2">
          <label for="contact_city" class="input-group-text" style="line-height: 0.5rem;">City</label>
          <select name="city" id="contact_city" class="form-select form-select-sm">
            <option value="Choose...">Choose...</option>
            <% @cities.each do |city| %>
              <option value="<%= city %>"><%= city %></option>
            <% end %>
          </select>
        </div>
        
        <!-- Submit Button -->
        <div class="text-center mt-1 d-grid">
          <button type="button" id="submit_form" class="btn btn-custom">Submit</button>
        </div>
      </div>  
    </div>
  </div>
</div>
<!--about -->
<div class="container my-5">
  <div class="about-content p-2 ">
    <h2 class="text-center my-4">
      Why Choose us
    </h2>
    <hr class="mx-auto" style="width: 60px; height: 4px; background-color: #541eaa; border: 0;">

    <p>
      When you give your home the Livspace touch, you get both beauty and functionality. We employ state-of-the-art technology to ensure your home features a flawless look that lasts a very long time.
      When you give your home the Livspace touch, you get both beauty and functionality. We employ state-of-the-art technology to ensure your home features a flawless look that lasts a very long time.
      When you give your home the Livspace touch, you get both beauty and functionality. We employ state-of-the-art technology to ensure your home features a flawless look that lasts a very long time.
    </p>
  </div>
</div>
<!--caousel section-->
<div class="container">
  <div class="row">
    <div class="col-12 col-md-6 col-lg-6 text-dark d-flex align-items-center ">
      <div class="content">
        <h2 class="my-3">
          The home design you crave
        </h2>
        <hr class="" style="width: 100px; height: 4px; background-color: #541eaa; border: 0;">
        <p>
          When you give your home the Livspace touch, you get both beauty and functionality. We employ state-of-the-art technology to ensure your home features a flawless look that lasts a very long time.
        </p>
      </div>
    </div>
    <div class="col-12 col-md-6 col-lg-6">
      <div class="rotation-container">
        <div class="item-container item-container-1">
          <a href="#" class="item text-center text-decoration-none item-1">100% Quality Assurance
          </a>
        </div>
        <div class="item-container item-container-2">
          <a href="#" class="item text-center text-decoration-none item-2">
            Personalised designs
          </a>
        </div>
        <div class="item-container item-container-3">
          <a href="#" class="item text-center text-decoration-none item-3">
            Transparent pricing
          </a>
        </div>
        <div class="item-container item-container-4">
          <a href="#" class="item text-center text-decoration-none item-4">
            Dedicated Support Team
          </a>
        </div>
        <div class="item-container item-container-5">
          <a href="#" class="item text-center text-decoration-none item-5">
            Durable Modular Furniture
          </a>
        </div>
        <div class="item-container item-container-6">
          <a href="#" class="item text-center text-decoration-none item-6">
            Dedicated Support Team
          </a>
        </div>  
    </div>
    </div>
  </div>
</div>

<div class="grid-item" id="projects">
  <h2>Transforming Your Space</h2>
  <hr class="mx-auto" style="width: 60px; height: 4px; background-color: #541eaa; border: 0;">
  <p>Look no further than Ishana Interior for end-to-end interior design services
  </p>
</div>
<div class="responsive">
  <div style="width: 18rem; height: 50vh; margin: 2rem;"> <%= image_tag 'A1.png', class: "img-fluid p-4" %></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A2.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A3.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'V1.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A1.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'V3.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A1.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A2.png' , class: "img-fluid p-4"%></div>
  <div style="width: 18rem; height: 50vh; margin: 2rem;"><%= image_tag 'A3.png' , class: "img-fluid p-4"%></div>
</div>


<%= render 'progress' %>
<div class="container p-4 ">
  <h2 class="fw-bold text-center">Our Work</h2>
  <div class="d-flex flex-wrap justify-content-center mt-5 align-items-center"> 
      <% Project.all.each do |project| %>
      <a href="<%= project_path(project.id) %>" class="single-portfolio" 
      style="background-image: url(<%= url_for(project.images.last) %>);">
        <div class="portfolio-content">
          <span class="portfolio-title"><%= project.name %></span>
          <span class="portfolio-description"><%= project.address %></span>
          <button class="btn btn-light btn-sm mt-2 portfolio-button" >View More<button>  
        </div>
      </a>
      <% end %>
  </div>
  <div class="d-flex justify-content-center mt-4">
    <%= link_to '/', target: '_blank', class: 'btn btn-custom-rounded', id: 'hover-button' do %>
      <span class="ml-2" id="hover-text">Want to see more of our work</span>
    <% end %>
  </div>
</div>
<%= render 'contact_us' %>
<div class="scrollTop" id="scrollToTop"> <i class="fa fa-arrow-up"></i></div>
<%= render 'social_links' %>
<%= render 'shared/footer' %>
<!-- modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="p-4 rounded bg-white text-dark shadow" id="contact_modal_form">
          <h3>Let's Connect</h3>
          <p>Tell us some basic information, and our executive will get back to you.</p>
                
          <!-- Name Field -->
          <div class="mb-2">
            <label for="contact_name" class="form-label">Name</label>
            <input type="text" name="name" id="contact_modal_name" class="form-control form-control-sm" placeholder="Enter your name">
          </div>
        
          <!-- State Selection -->
        <div class="input-group mb-2">
          <label for="contact_state" class="input-group-text" style="line-height: 0.5rem;">State</label>
          <select name="state" id="contact_state" class="form-select form-select-sm">
            <option value="Choose...">Choose...</option>
            <% @states.each do |state| %>
              <option value="<%= state %>"><%= state %></option>
            <% end %>
          </select>
        </div>
        
        <!-- City Selection -->
        <div class="input-group mb-2">
          <label for="contact_city" class="input-group-text" style="line-height: 0.5rem;">City</label>
          <select name="city" id="contact_city" class="form-select form-select-sm">
            <option value="Choose...">Choose...</option>
            <% @cities.each do |city| %>
              <option value="<%= city %>"><%= city %></option>
            <% end %>
          </select>
        </div>

          <!-- Submit Button -->
          <div class="text-center mt-1 d-grid">
            <button type="button" id="submit_modal_form" class="btn btn-custom">Submit</button>
          </div>
        </div>  
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>

<script>

  document.addEventListener('DOMContentLoaded', function () {
    const stateSelect = document.getElementById('contact_state');
    const citySelect = document.getElementById('contact_city');
    stateSelect.addEventListener('change', function () {
      const state = stateSelect.value;

      if (state !== 'Choose...') {
        fetch(`/get_cities?state=${state}`)
          .then(response => response.json())
          .then(data => {
            citySelect.innerHTML = '<option value="Choose...">Choose...</option>';   
            data.cities.forEach(city => {
              const option = document.createElement('option');
              option.value = city;
              option.textContent = city;
              citySelect.appendChild(option);
            });
          })
          .catch(error => {
            console.error('Error fetching cities:', error);
          });
      } else {
        
        citySelect.innerHTML = '<option value="Choose...">Choose...</option>';
      }
    });
  });

  $(document).ready(function(){
    $('.responsive').slick({
      centerMode: true,
      centerPadding: '60px',
      slidesToShow: 3,
      autoplay: true,
      autoplaySpeed: 100,
      infinite: true,
      responsive: [
        {
          breakpoint: 768,
          settings: {
            arrows: true,
            centerMode: true,
            centerPadding: '40px',
            slidesToShow: 3
          }
        },
        {
          breakpoint: 480,
          settings: {
            arrows: true,
            centerMode: true,
            centerPadding: '40px',
            slidesToShow: 1
          }
        }
      ]
    });
  });

	
  function scrollToTop() {
    console.log('helo');
    window.scrollTo(0,0);
  }
    
  document.getElementById('scrollToTop').onclick = function() {
    scrollToTop();
  }; 
   
  const submitButton = document.getElementById('submit_form');
  const form = document.getElementById('contact_form');

  submitButton.addEventListener('click', function(event) {
    event.preventDefault();  // Prevent the default form submission

    // Collect form data
    const formData = new FormData();
    formData.append('name', document.getElementById('contact_name').value);
    formData.append('contact', document.getElementById('contact_contact').value);
    formData.append('state', document.getElementById('contact_state').value);
    formData.append('city', document.getElementById('contact_city').value);

      // Contact number validation (only digits and exactly 10 digits)
    var contactInput = document.getElementById('contact_contact');
    var contactValue = contactInput.value;
    var contactPattern = /^\d{10}$/;  // Pattern for exactly 10 digits

    if (!contactPattern.test(contactValue)) {
      // If contact number is invalid, show alert and stop further execution
      alert("Please enter a valid 10-digit contact number.");
      return;
    }
    // Send AJAX request to the controller
    fetch('/contacts/', {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json',  // Expecting JSON response from server
        'X-CSRF-Token': csrfToken,   // Include the CSRF token in the headers
      }
    })
    .then(response => response.json())  // Parse the JSON response
    .then(data => {
      if (data.success) {
        // If success, show SweetAlert
        Swal.fire({
          title: 'Success!',
          text: data.message,
          icon: 'success',
          confirmButtonText: 'OK'
        }).then(() => {
          window.location = '/';  // Redirect to root after success
        });
      } else {
        // If failure, show SweetAlert with error message
        Swal.fire({
          title: 'Error!',
          text: data.message,
          icon: 'error',
          confirmButtonText: 'OK'
        });
      }
    })
    .catch(error => {
      console.error('Error submitting the form:', error);
      Swal.fire({
        title: 'Error!',
        text: `There was a problem: ${error.message || error.toString()}`,  // Print error message
        icon: 'error',
        confirmButtonText: 'OK'
      });
    });
  });
</script>
